(this.webpackJsonpisafm=this.webpackJsonpisafm||[]).push([[0],{74:function(t,e,n){},75:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(8),i=n.n(r),s=n(46),u=n(14),o=n.n(u),l=n(23),j=n(16),f=n(10),b=n(114),h=n(119),d=n(115),p=n(116),O=n(120),x=n(118),m=n(108),v=n(117),g=n(4),y=function(t){var e=t.values,n=t.selectedValue,c=t.onSelect,a=t.classes,r=t.prefix;return Object(g.jsxs)(m.a,{variant:"outlined",className:a.formControl,children:[Object(g.jsx)(O.a,{id:"".concat(r,"-input-label"),className:"input-label",children:r}),Object(g.jsx)(v.a,{labelId:"".concat(r,"-input-label"),id:"".concat(r,"-input-select"),value:n,onChange:c,label:r,autoWidth:!0,children:e.map((function(t){var e=t.id,n=t.name;return Object(g.jsx)(x.a,{value:e,children:n},"prefix-".concat(e))}))})]})},w=n(53),S=n.n(w),k=n(54),_=n.n(k),E=S()(),N=function(){navigator.clipboard.writeText(window.location.href).then((function(){}),(function(){return alert("error copying")}))},C=function(t){var e=t.district,n=t.age,a=Object(c.useState)(!1),r=Object(j.a)(a,2),i=r[0],s=r[1],u=Object(c.useState)(0),f=Object(j.a)(u,2),b=f[0],h=f[1];return Object(c.useEffect)((function(){(function(){var t=Object(l.a)(o.a.mark((function t(){var c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(+n<18)){t.next=3;break}return h(0),t.abrupt("return");case 3:s(!0),c=E.format("DD-MM-YYYY"),a="".concat("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?","district_id=").concat(e,"&date=").concat(c),fetch(a).then((function(t){return t.json()})).then((function(t){return t.centers.map((function(t){return t.sessions}))})).then((function(t){return _()(t)})).then((function(t){return t.map((function(t){return{capacity:t.available_capacity,min_age:t.min_age_limit}}))})).then((function(t){return t.filter((function(t){return t.capacity>0&&t.min_age<=+n}))})).then((function(t){return t.reduce((function(t,e){return t+e.capacity}),0)})).then((function(t){h(t),s(!1)}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e,n]),Object(g.jsx)(g.Fragment,{children:i?"Loading":Object(g.jsxs)("div",{className:"flex",style:{flexDirection:"column",alignItems:"center"},children:[Object(g.jsxs)("h1",{align:"center",children:["There are ",b," slots in the next 7 days!"," ",0===b?"\ud83d\ude14":"\ud83d\ude80"]}),Object(g.jsxs)("span",{children:["Want to check back again later?"," ",Object(g.jsx)("u",{onClick:N,children:"Copy the URL!"})]})]})})},D=function(){return Object(g.jsx)("footer",{style:{position:"fixed",left:"0px",bottom:"25px",width:"100%",fontSize:"1.2em",color:"grey",textAlign:"center"},children:Object(g.jsxs)("div",{className:"container",children:["By"," ",Object(g.jsx)("a",{href:"https://yashshah1.github.io",target:"_blank",children:"Yash Shah"})]})})},Y=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(t){return t.json()})).then((function(t){return t.states})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=Object(l.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("https://cdn-api.co-vin.in/api/v2/admin/location/districts/".concat(e)).then((function(t){return t.json()})).then((function(t){return t.districts})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(t){var e={};return t.length<=1?{state:21,district:363,age:21}:(t.slice(1).split("&").forEach((function(t){if(0!==t.trim().length){var n=t.split("="),c=Object(j.a)(n,2),a=c[0],r=c[1];r.trim().length>0&&(e[a]=r)}})),e)},W=Object(b.a)((function(t){return{formControl:{margin:t.spacing(1),minWidth:120},selectEmpty:{marginTop:t.spacing(2)}}}));var B=Object(f.f)((function(){var t=Object(c.useState)(!0),e=Object(j.a)(t,2),n=e[0],a=e[1],r=Object(c.useState)([]),i=Object(j.a)(r,2),s=i[0],u=i[1],b=Object(c.useState)(""),O=Object(j.a)(b,2),x=O[0],m=O[1],v=Object(c.useState)([]),w=Object(j.a)(v,2),S=w[0],k=w[1],_=Object(c.useState)(""),E=Object(j.a)(_,2),N=E[0],B=E[1],M=Object(c.useState)(""),T=Object(j.a)(M,2),V=T[0],z=T[1],A=W(),J=Object(f.d)(),L=Object(f.e)().search;Object(c.useEffect)((function(){(function(){var t=Object(l.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y();case 2:e=t.sent,u(e.map((function(t){return{id:t.state_id,name:t.state_name}}))),a(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){var t=I(L),e=t.state,n=t.district,c=t.age;e&&m(e),n&&B(n),z(c||"")}),[L]),Object(c.useEffect)((function(){a(!0),function(){var t=Object(l.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(x);case 2:e=t.sent,k(e.map((function(t){return{id:t.district_id,name:t.district_name}}))),a(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[x]);var R=function(t){return function(e){var n=I(L),c=e.target.value;"age"===t&&(c=c.replace(/\D/g,"")),n[t]=c.toString();var a,r=(a=n,Object.entries(a).map((function(t){var e=Object(j.a)(t,2),n=e[0],c=e[1];return c.trim().length>0?"".concat(n,"=").concat(c):""})).join("&"));J.push("?".concat(r))}};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(d.a,{maxWidth:"sm",children:[Object(g.jsx)("h1",{align:"center",children:"Is a slot available for me?"}),Object(g.jsx)("h3",{align:"center",children:"For people who are too lazy to login"}),Object(g.jsx)("br",{}),n?Object(g.jsx)("div",{className:"flex justify-center",children:Object(g.jsx)(p.a,{})}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"flex justify-center",children:[Object(g.jsx)(y,{values:s,selectedValue:x,classes:A,onSelect:R("state"),prefix:"state"}),Object(g.jsx)(y,{values:S,selectedValue:N,classes:A,onSelect:R("district"),prefix:"district"})]}),Object(g.jsx)("br",{}),""!==N&&Object(g.jsx)("div",{className:"flex",style:{flexDirection:"column"},children:Object(g.jsx)(h.a,{id:"outlined-basic",label:"Age",variant:"outlined",width:"sm",value:V,onChange:R("age")})})]}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),""!==N&&""!==V&&Object(g.jsx)(C,{district:N,age:V})]}),Object(g.jsx)(D,{})]})}));n(74);i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(s.a,{children:Object(g.jsx)(B,{})})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.5799d085.chunk.js.map